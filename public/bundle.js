!function(t){function e(e){for(var s,a,r=e[0],h=e[1],c=e[2],l=0,u=[];l<r.length;l++)a=r[l],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&u.push(o[a][0]),o[a]=0;for(s in h)Object.prototype.hasOwnProperty.call(h,s)&&(t[s]=h[s]);for(d&&d(e);u.length;)u.shift()();return n.push.apply(n,c||[]),i()}function i(){for(var t,e=0;e<n.length;e++){for(var i=n[e],s=!0,r=1;r<i.length;r++){var h=i[r];0!==o[h]&&(s=!1)}s&&(n.splice(e--,1),t=a(a.s=i[0]))}return t}var s={},o={0:0},n=[];function a(e){if(s[e])return s[e].exports;var i=s[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.m=t,a.c=s,a.d=function(t,e,i){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)a.d(i,s,function(e){return t[e]}.bind(null,s));return i},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="";var r=window.webpackJsonp=window.webpackJsonp||[],h=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var d=h;n.push([4,1]),i()}({4:function(t,e,i){"use strict";i.r(e);var s=i(0),o=i(2);const n="NEW_GAME",a="UPDATE_POINTS",r="START",h="CLICK",c="GAME_OVER",d="STACK";var l=new(i.n(o).a);class u extends s.f{constructor({width:t,height:e,alt:i=40,color:o}){super(),this.geometry=new s.a(t,i,e),this.material=new s.g({color:o,flatShading:!0,roughness:.15}),this.material.color.convertSRGBToLinear(),this.color=o,this.dimension={width:t,height:e}}}var p=u;s.f;let g=0;var m=()=>{const t=[1752220,1482885,3066993,2600544,3447003,2719929,10181046,9323693,3426654,2899536,15844367,15965202,15105570,13849600,15158332,12597547,15528177,12436423,12436423,9807270,8359053];return g++,t[g%t.length]};var _=class extends p{constructor({width:t,height:e,last:i}){super({width:t,height:e,color:m()}),this.last=i,this.position.y=i.position.y+i.geometry.parameters.height/2+this.geometry.parameters.height/2,this.max_position=360,this.is_stopped=!1,this.direction=1,this.velocity=4,this.actual_axis=Math.random()>=.5?"x":"z",this.contrary_axis="x"===this.actual_axis?"z":"x",this.position[this.actual_axis]-=this.max_position+this.direction,this.position[this.contrary_axis]=i.position[this.contrary_axis]}place(){const t="x"===this.actual_axis?"width":"height",e=this.position[this.actual_axis]-this.last.position[this.actual_axis],i=this.last.dimension[t]-Math.abs(e);if(i>0){const s=this.last.dimension[t]-i,o={base:{width:"width"===t?i:this.dimension.width,height:"height"===t?i:this.dimension.height},cut:{width:"width"===t?s:this.dimension.width,height:"height"===t?s:this.dimension.height},color:this.color,axis:this.actual_axis,last_position:this.position,direction:e/Math.abs(e)|1};l.emit(d,o)}else l.emit(c)}update(){this.is_stopped||(this.position[this.actual_axis]+=this.direction*this.velocity,Math.abs(this.position[this.actual_axis])>=this.max_position&&(this.direction*=-1))}};var w=class{constructor(t){this.base=new p({width:t.base.width,height:t.base.height,color:t.color});const e=t.cut.width/2*t.direction,i=t.cut.height/2*t.direction;this.base.position.set("x"===t.axis?t.last_position.x-e:t.last_position.x,t.last_position.y,"z"===t.axis?t.last_position.z-i:t.last_position.z),this.cut=new p({width:t.cut.width,height:t.cut.height,color:t.color});const s=t.base.width/2*t.direction,o=t.base.height/2*t.direction;this.cut.position.set("x"===t.axis?t.last_position.x+s:t.last_position.x,t.last_position.y,"z"===t.axis?t.last_position.z+o:t.last_position.z)}getBase(){return this.base}getCut(){return this.cut}},x=i(1);var b=class{constructor(){this.points=document.getElementById("points"),this.button_start=document.getElementById("button_start"),this.gameover=document.getElementById("gameover"),this.events()}events(){l.on(n,()=>{this.button_start.style.top="30%",this.button_start.classList.add("animate__fadeInDown")}),l.on(r,()=>{this.button_start.classList.add("animate__fadeOutUp"),this.points.style.top="30%",this.points.classList.add("animate__fadeInDown"),this.gameover.classList.add("animate__fadeOutDown")}),l.on(a,t=>{this.points.innerHTML=t}),l.on(c,()=>{this.points.style.top="25%",this.gameover.style.top="40%",this.gameover.classList.remove("animate__fadeOutDown"),this.gameover.classList.add("animate__fadeInUp")})}};class y extends s.i{constructor(){super();new b;this.background=new s.b("skyblue").convertSRGBToLinear(),this.stack_points=0,this.game_over=!0,this.create(),this.events()}create(){this.base_cube=new p({width:200,height:200,alt:200,color:2899536}),this.add(this.base_cube),this.boxes_group=new s.d,this.add(this.boxes_group);const t=new s.e(16777147,526368,.5),e=new s.c(16777215,1);this.add(e,t)}events(){l.emit(n),l.on(h,()=>{this.game_over?l.emit(r):this.getLastBox().place()}),l.on(r,()=>{this.resetGroup(),l.emit(a,this.stack_points),this.newBox({width:200,height:200,last:this.base_cube}),this.game_over=!1}),l.on(d,t=>{this.stack_points++,l.emit(a,this.stack_points),this.boxes_group.remove(this.getLastBox());const e=new w(t);this.boxes_group.add(e.getBase()),this.add(e.getCut());new x.Tween(e.getCut().position).to({[t.axis]:e.getCut().position[t.axis]+200*t.direction},500).easing(x.Easing.Quadratic.Out).start(),e.getCut().material.transparent=!0;new x.Tween(e.getCut().material).to({opacity:.2},600).easing(x.Easing.Quadratic.Out).onComplete(()=>{this.remove(e.getCut())}).start(),this.newBox({width:t.base.width,height:t.base.height,last:this.getLastBox()})}),l.on(c,()=>{if(!this.game_over){this.stack_points=0;new x.Tween(this.getLastBox().position).to({y:this.getLastBox().position.y+300},1e3).easing(x.Easing.Bounce.Out).start()}this.game_over=!0})}newBox({width:t,height:e,last:i}){const s=new _({width:t,height:e,last:i});this.boxes_group.add(s)}resetGroup(){this.boxes_group.children.map((t,e)=>{new x.Tween(t.scale).to({x:.5,y:.5,z:.5},80*e).easing(x.Easing.Quadratic.Out).onComplete(()=>{this.boxes_group.remove(t)}).start()})}getLastBox(){return this.boxes_group.children[this.boxes_group.children.length-1]}update(){x.update(),this.game_over||this.getLastBox().update()}}var v=y;const f=document.querySelector("#game-container"),L=new class{constructor(t){this.container=t,this.camera_pan_up=40,this.camera_y=250,this.scene=new v,this.camera=new s.h(this.container.clientWidth/-2,this.container.clientWidth/2,this.container.clientHeight/2,this.container.clientHeight/-2,-1e3,1e3),this.camera.position.set(10,10+this.camera_y,10),this.camera.lookAt(0,this.camera_y,0),this.renderer=new s.j({antialias:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.outputEncoding=s.k,this.renderer.physicallyCorrectLights=!0,this.container.appendChild(this.renderer.domElement),this.onResize(),this.render(),this.events()}events(){l.on(d,()=>{this.camera_y+=this.camera_pan_up;new x.Tween(this.camera.position).to({y:10+this.camera_y},500).easing(x.Easing.Sinusoidal.In).start()}),l.on(r,()=>{this.camera_y=250,this.camera.position.set(10,10+this.camera_y,10),this.camera.lookAt(0,this.camera_y,0);new x.Tween(this.camera).to({zoom:.9},800).easing(x.Easing.Sinusoidal.In).onUpdate(()=>{this.camera.updateProjectionMatrix()}).start()}),l.on(c,()=>{new x.Tween(this.camera).to({zoom:.6},700).easing(x.Easing.Quadratic.Out).onUpdate(()=>{this.camera.updateProjectionMatrix()}).start()})}onResize(){this.renderer.setSize(this.container.clientWidth,this.container.clientHeight),this.camera.left=this.container.clientWidth/-2,this.camera.right=this.container.clientWidth/2,this.camera.top=this.container.clientHeight/2,this.camera.bottom=this.container.clientHeight/-2,this.camera.zoom=.9,this.camera.updateProjectionMatrix()}render(){this.renderer.render(this.scene,this.camera),this.scene.update(),this.renderer.setAnimationLoop(()=>this.render())}}(f);window.addEventListener("resize",()=>{L.onResize()}),document.addEventListener("click",()=>{l.emit(h)})}});